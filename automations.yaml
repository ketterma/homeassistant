- id: '1755668156778'
  alias: Driveway - Smooth Sunset Fade
  description: 'Gradually fade in driveway lights starting 15 minutes before sunset'
  triggers:
  - trigger: sun
    event: sunset
    offset: '-00:15:00'
  actions:
  - service: light.turn_on
    target:
      entity_id: light.driveway
    data:
      brightness_pct: 50
      transition: 900
  mode: single

- id: '1755668333675'
  alias: Driveway - Smooth Sunrise Fade Out
  description: 'Gradually fade out driveway lights starting 15 minutes after sunrise'
  triggers:
  - trigger: sun
    event: sunrise
    offset: '00:15:00'
  actions:
  - service: light.turn_off
    target:
      entity_id: light.driveway
    data:
      transition: 900
  mode: single


- id: 'security_lights_activate'
  alias: 'Security Lights - Person/Vehicle Detected'
  description: 'Activate security lighting when person or vehicle detected during night hours'
  triggers:
  - trigger: state
    entity_id: 
      - binary_sensor.driveway_af_person_detected
      - binary_sensor.driveway_af_vehicle_detected
      - binary_sensor.driveway_cdv_person_detected  
      - binary_sensor.driveway_cdv_vehicle_detected
      - binary_sensor.g4_pro_person_detected
      - binary_sensor.g4_pro_vehicle_detected  
      - binary_sensor.g4_doorbell_person_detected
      - binary_sensor.g4_doorbell_vehicle_detected
    to: 'on'
  conditions:
  - condition: sun
    after: sunset
    before: sunrise
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: timer.security_lights_timer
        state: 'idle'
      sequence:
      - service: scene.create
        data:
          scene_id: security_lights_restore
          snapshot_entities:
            - light.driveway
            - light.front_porch_1
            - light.front_porch_2
            - light.front_porch_3
            - light.back_door_lantern
      - service: light.turn_on
        target:
          entity_id: light.driveway
        data:
          brightness_pct: 80
          transition: 5
      - service: light.turn_on
        target:
          entity_id: 
            - light.front_porch_1
            - light.front_porch_2  
            - light.front_porch_3
            - light.back_door_lantern
        data:
          brightness_pct: 100
          transition: 5
  - service: timer.start
    target:
      entity_id: timer.security_lights_timer
  mode: restart

- id: 'security_lights_reset'
  alias: 'Security Lights - Reset After Timer'  
  description: 'Restore lights to original state after 5 minutes of no activity'
  triggers:
  - trigger: event
    event_type: timer.finished
    event_data:
      entity_id: timer.security_lights_timer
  actions:
  - service: scene.turn_on
    target:
      entity_id: scene.security_lights_restore
    data:
      transition: 5
  - service: scene.delete
    target:
      entity_id: scene.security_lights_restore
  mode: single

